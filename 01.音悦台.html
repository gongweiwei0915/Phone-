<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no"/>
		<title></title>
		<link rel="stylesheet" type="text/css" href="css/index.css"/>
	</head>
	<body>
		<div id="wrap">
			<!--头部-->
			<header id="header">
				<!--上半部分-->
				<div id="headerTop">
					<h1 id="logo">
						<a href="javascript:;">
							<img src="img/logo.png"/>
						</a>
					</h1>
					<!--雪碧图，精灵图，css精灵，图片整合技术， Sprite-->
					<a href="javascript:;" id="menuBtn" class="menuBtnClos"></a>
					<div id="nav">
						<a href="javascript:;" id="searchBtn">搜索</a>
						<a href="javascript:;">登录</a>
						<a href="javascript:;">注册</a>
					</div>					
				</div>
				<!--下半部分-->
				<form id="search">
					<input type="text" placeholder="请输入搜索内容。。。"/>
					<input type="submit" value="搜索"/>
				</form>
				<!--遮罩-->
				<ul id="mask">
					<li>
						<a href="javascript:;">首页</a>
					</li>
					<li>
						<a href="javascript:;">MV</a>
					</li>
					<li>
						<a href="javascript:;">悦单</a>
					</li>
					<li>
						<a href="javascript:;">V榜</a>
					</li>
					<li>
						<a href="javascript:;">音悦</a>
					</li>
					<li>
						<a href="javascript:;">商城</a>
					</li>
					<li>
						<a href="javascript:;">节目</a>
					</li>
					<li>
						<a href="javascript:;">饭团</a>
					</li>
					<li>
						<a href="javascript:;">资讯</a>
					</li>
					<li>
						<a href="javascript:;">我的家</a>
					</li>
					<li>
						<a href="javascript:;">APP下载</a>
					</li>
					<li>
						<a href="javascript:;">热门应用</a>
					</li>
				</ul>
			</header>
			<!--内容区-->
			<div id="con_wrap">			
				<div id="content">
					<!--导航-->
					<nav id="navs">
						<ul id="navsList">
							<li class="active">
								<a href="javascript:;">首页</a>
							</li>
							<li>
								<a href="javascript:;">MV</a>
							</li>
							<li>
								<a href="javascript:;">悦单</a>
							</li>
							<li>
								<a href="javascript:;">V榜</a>
							</li>
							<li>
								<a href="javascript:;">音悦</a>
							</li>
							<li>
								<a href="javascript:;">商城</a>
							</li>
							<li>
								<a href="javascript:;">节目</a>
							</li>
							<li>
								<a href="javascript:;">饭团</a>
							</li>
							<li>
								<a href="javascript:;">资讯</a>
							</li>
							<li>
								<a href="javascript:;">我的家</a>
							</li>
							<li>
								<a href="javascript:;">APP下载</a>
							</li>
							<li>
								<a href="javascript:;">热门应用</a>
							</li>
						</ul>					
					</nav>
					<!--无缝滑屏-->
					<div id="ban_wrap">
						<ul id="ban_list">
							<li>
								<a href="javascript:;">
									<img src="img/1.jpg"/>
								</a>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/2.jpg"/>
								</a>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/3.jpg"/>
								</a>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/4.jpg"/>
								</a>
							</li>
							<li>
								<a href="javascript:;">
									<img src="img/5.jpg"/>
								</a>
							</li>
						</ul>
						<div id="ban_navs">
							<span class="active"></span>
							<span></span>
							<span></span>
							<span></span>
							<span></span>
						</div>
					</div>
					
					<!--tab选项卡-->
					
					<section class="tab">
						<!--头部-->
						<header class="tab_header">
							<h2>MV首播</h2>
							<a href="javascript:;">更多&gt;</a>
						</header>
						<!--导航-->
						<nav class="tab_nav">					
							<a href="###">全部</a>
							<a href="###">内地</a>
							<a href="###">港台</a>
							<a href="###">欧美</a>
							<a href="###">韩国</a>
							<a href="###">日本</a>
							<span></span>
						</nav>	
						<div class="tab_wrap">	
							<ul class="tab_loading"></ul>
							<ul class="tab_list">
								<li> 
									<a href="###">
										<img src="img/a.jpg"/>
										<span>君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない</span>
									</a>
									<div class="ice">
										<div class="ice_left">
											<span class="ice_pic"></span>
											<span>9167</span>
										</div>
										<div class="ice_right">
											<span class="ice_pic"></span>
											<span>6</span>
										</div>
									</div>
								</li>
								<li> 
									<a href="###">
										<img src="img/b.jpg"/>
										<span>君に贈る花がない</span>
									</a>
									<div class="ice">
										<div class="ice_left">
											<span class="ice_pic"></span>
											<span>9167</span>
										</div>
										<div class="ice_right">
											<span class="ice_pic"></span>
											<span>6</span>
										</div>
									</div>
								</li>
								<li> 
									<a href="###">
										<img src="img/c.jpg"/>
										<span>君に贈る花がない</span>
									</a>
									<div class="ice">
										<div class="ice_left">
											<span class="ice_pic"></span>
											<span>9167</span>
										</div>
										<div class="ice_right">
											<span class="ice_pic"></span>
											<span>6</span>
										</div>
									</div>
								</li>
								<li> 
									<a href="###">
										<img src="img/d.jpg"/>
										<span>君に贈る花がない</span>
									</a>
									<div class="ice">
										<div class="ice_left">
											<span class="ice_pic"></span>
											<span>9167</span>
										</div>
										<div class="ice_right">
											<span class="ice_pic"></span>
											<span>6</span>
										</div>
									</div>
								</li>
								<li> 
									<a href="###">
										<img src="img/e.jpg"/>
										<span>君に贈る花がない</span>
									</a>
									<div class="ice">
										<div class="ice_left">
											<span class="ice_pic"></span>
											<span>9167</span>
										</div>
										<div class="ice_right">
											<span class="ice_pic"></span>
											<span>6</span>
										</div>
									</div>
								</li>
								<li> 
									<a href="###">
										<img src="img/f.jpg"/>
										<span>君に贈る花がない</span>
									</a>
									<div class="ice">
										<div class="ice_left">
											<span class="ice_pic"></span>
											<span>9167</span>
										</div>
										<div class="ice_right">
											<span class="ice_pic"></span>
											<span>6</span>
										</div>
									</div>
								</li>
							</ul>
							<ul class="tab_loading"></ul>
						</div>
					</section>
					<section class="tab">
						<!--头部-->
						<header class="tab_header">
							<h2>MV首播</h2>
							<a href="javascript:;">更多&gt;</a>
						</header>
						<!--导航-->
						<nav class="tab_nav">					
							<a href="###">全部</a>
							<a href="###">内地</a>
							<a href="###">港台</a>
							<a href="###">欧美</a>
							<a href="###">韩国</a>
							<a href="###">日本</a>
							<span></span>
						</nav>	
						<div class="tab_wrap">	
							<ul class="tab_loading"></ul>
							<ul class="tab_list">
								<li> 
									<a href="###">
										<img src="img/a.jpg"/>
										<span>君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない</span>
									</a>
									<div class="ice">
										<div class="ice_left">
											<span class="ice_pic"></span>
											<span>9167</span>
										</div>
										<div class="ice_right">
											<span class="ice_pic"></span>
											<span>6</span>
										</div>
									</div>
								</li>
								<li> 
									<a href="###">
										<img src="img/b.jpg"/>
										<span>君に贈る花がない</span>
									</a>
									<div class="ice">
										<div class="ice_left">
											<span class="ice_pic"></span>
											<span>9167</span>
										</div>
										<div class="ice_right">
											<span class="ice_pic"></span>
											<span>6</span>
										</div>
									</div>
								</li>
								<li> 
									<a href="###">
										<img src="img/c.jpg"/>
										<span>君に贈る花がない</span>
									</a>
									<div class="ice">
										<div class="ice_left">
											<span class="ice_pic"></span>
											<span>9167</span>
										</div>
										<div class="ice_right">
											<span class="ice_pic"></span>
											<span>6</span>
										</div>
									</div>
								</li>
								<li> 
									<a href="###">
										<img src="img/d.jpg"/>
										<span>君に贈る花がない</span>
									</a>
									<div class="ice">
										<div class="ice_left">
											<span class="ice_pic"></span>
											<span>9167</span>
										</div>
										<div class="ice_right">
											<span class="ice_pic"></span>
											<span>6</span>
										</div>
									</div>
								</li>
								<li> 
									<a href="###">
										<img src="img/e.jpg"/>
										<span>君に贈る花がない</span>
									</a>
									<div class="ice">
										<div class="ice_left">
											<span class="ice_pic"></span>
											<span>9167</span>
										</div>
										<div class="ice_right">
											<span class="ice_pic"></span>
											<span>6</span>
										</div>
									</div>
								</li>
								<li> 
									<a href="###">
										<img src="img/f.jpg"/>
										<span>君に贈る花がない</span>
									</a>
									<div class="ice">
										<div class="ice_left">
											<span class="ice_pic"></span>
											<span>9167</span>
										</div>
										<div class="ice_right">
											<span class="ice_pic"></span>
											<span>6</span>
										</div>
									</div>
								</li>
							</ul>
							<ul class="tab_loading"></ul>
						</div>
					</section>
					<section class="tab">
						<!--头部-->
						<header class="tab_header">
							<h2>MV首播</h2>
							<a href="javascript:;">更多&gt;</a>
						</header>
						<!--导航-->
						<nav class="tab_nav">					
							<a href="###">全部</a>
							<a href="###">内地</a>
							<a href="###">港台</a>
							<a href="###">欧美</a>
							<a href="###">韩国</a>
							<a href="###">日本</a>
							<span></span>
						</nav>	
						<div class="tab_wrap">	
							<ul class="tab_loading"></ul>
							<ul class="tab_list">
								<li> 
									<a href="###">
										<img src="img/a.jpg"/>
										<span>君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない</span>
									</a>
									<div class="ice">
										<div class="ice_left">
											<span class="ice_pic"></span>
											<span>9167</span>
										</div>
										<div class="ice_right">
											<span class="ice_pic"></span>
											<span>6</span>
										</div>
									</div>
								</li>
								<li> 
									<a href="###">
										<img src="img/b.jpg"/>
										<span>君に贈る花がない</span>
									</a>
									<div class="ice">
										<div class="ice_left">
											<span class="ice_pic"></span>
											<span>9167</span>
										</div>
										<div class="ice_right">
											<span class="ice_pic"></span>
											<span>6</span>
										</div>
									</div>
								</li>
								<li> 
									<a href="###">
										<img src="img/c.jpg"/>
										<span>君に贈る花がない</span>
									</a>
									<div class="ice">
										<div class="ice_left">
											<span class="ice_pic"></span>
											<span>9167</span>
										</div>
										<div class="ice_right">
											<span class="ice_pic"></span>
											<span>6</span>
										</div>
									</div>
								</li>
								<li> 
									<a href="###">
										<img src="img/d.jpg"/>
										<span>君に贈る花がない</span>
									</a>
									<div class="ice">
										<div class="ice_left">
											<span class="ice_pic"></span>
											<span>9167</span>
										</div>
										<div class="ice_right">
											<span class="ice_pic"></span>
											<span>6</span>
										</div>
									</div>
								</li>
								<li> 
									<a href="###">
										<img src="img/e.jpg"/>
										<span>君に贈る花がない</span>
									</a>
									<div class="ice">
										<div class="ice_left">
											<span class="ice_pic"></span>
											<span>9167</span>
										</div>
										<div class="ice_right">
											<span class="ice_pic"></span>
											<span>6</span>
										</div>
									</div>
								</li>
								<li> 
									<a href="###">
										<img src="img/f.jpg"/>
										<span>君に贈る花がない</span>
									</a>
									<div class="ice">
										<div class="ice_left">
											<span class="ice_pic"></span>
											<span>9167</span>
										</div>
										<div class="ice_right">
											<span class="ice_pic"></span>
											<span>6</span>
										</div>
									</div>
								</li>
							</ul>
							<ul class="tab_loading"></ul>
						</div>
					</section>
					<section class="tab">
						<!--头部-->
						<header class="tab_header">
							<h2>MV首播</h2>
							<a href="javascript:;">更多&gt;</a>
						</header>
						<!--导航-->
						<nav class="tab_nav">					
							<a href="###">全部</a>
							<a href="###">内地</a>
							<a href="###">港台</a>
							<a href="###">欧美</a>
							<a href="###">韩国</a>
							<a href="###">日本</a>
							<span></span>
						</nav>	
						<div class="tab_wrap">	
							<ul class="tab_loading"></ul>
							<ul class="tab_list">
								<li> 
									<a href="###">
										<img src="img/a.jpg"/>
										<span>君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない君に贈る花がない</span>
									</a>
									<div class="ice">
										<div class="ice_left">
											<span class="ice_pic"></span>
											<span>9167</span>
										</div>
										<div class="ice_right">
											<span class="ice_pic"></span>
											<span>6</span>
										</div>
									</div>
								</li>
								<li> 
									<a href="###">
										<img src="img/b.jpg"/>
										<span>君に贈る花がない</span>
									</a>
									<div class="ice">
										<div class="ice_left">
											<span class="ice_pic"></span>
											<span>9167</span>
										</div>
										<div class="ice_right">
											<span class="ice_pic"></span>
											<span>6</span>
										</div>
									</div>
								</li>
								<li> 
									<a href="###">
										<img src="img/c.jpg"/>
										<span>君に贈る花がない</span>
									</a>
									<div class="ice">
										<div class="ice_left">
											<span class="ice_pic"></span>
											<span>9167</span>
										</div>
										<div class="ice_right">
											<span class="ice_pic"></span>
											<span>6</span>
										</div>
									</div>
								</li>
								<li> 
									<a href="###">
										<img src="img/d.jpg"/>
										<span>君に贈る花がない</span>
									</a>
									<div class="ice">
										<div class="ice_left">
											<span class="ice_pic"></span>
											<span>9167</span>
										</div>
										<div class="ice_right">
											<span class="ice_pic"></span>
											<span>6</span>
										</div>
									</div>
								</li>
								<li> 
									<a href="###">
										<img src="img/e.jpg"/>
										<span>君に贈る花がない</span>
									</a>
									<div class="ice">
										<div class="ice_left">
											<span class="ice_pic"></span>
											<span>9167</span>
										</div>
										<div class="ice_right">
											<span class="ice_pic"></span>
											<span>6</span>
										</div>
									</div>
								</li>
								<li> 
									<a href="###">
										<img src="img/f.jpg"/>
										<span>君に贈る花がない</span>
									</a>
									<div class="ice">
										<div class="ice_left">
											<span class="ice_pic"></span>
											<span>9167</span>
										</div>
										<div class="ice_right">
											<span class="ice_pic"></span>
											<span>6</span>
										</div>
									</div>
								</li>
							</ul>
							<ul class="tab_loading"></ul>
						</div>
					</section>
				</div>			
			</div>
		</div>
		<div id="scrollBar"></div>
	</body>
	<script type="text/javascript" src="js/transformCss.js"></script>
	<script type="text/javascript" src="js/drag.js"></script>
	<script type="text/javascript">
		//默认行为
		document.addEventListener('touchstart',function(event){
			event.preventDefault();
		});
		
		//rem适配
		(function(){
			var width = document.documentElement.clientWidth/16;
			var styleN = document.createElement('style');
			styleN.innerHTML = 'html{font-size:'+ width +'px !important;}'
			document.head.appendChild(styleN);
		})();
		
		window.onload = function(){
			changeColor();
			changeFocus();
			changeMenu();
			drag();
			banner();	
			tab();
			scrollBarDrag();
		};
		
		//竖向滑屏和滚动条
		
		function scrollBarDrag(){
			var wrap = document.getElementById('con_wrap');
			var content = document.getElementById('content');
			var scrollBar = document.getElementById('scrollBar');
			
			var scale = document.documentElement.clientHeight/content.offsetHeight;
			scrollBar.style.height = document.documentElement.clientHeight * scale + 'px';
			
			var callback = {
				start:function(){
					scrollBar.style.opacity = '1';
				},
				move:function(){
					scrollBar.style.opacity = '1';
					
					//内容区偏移量= 滚动条偏移量 / scale;
					var dis = transformCss(content,'translateY') * scale;
					
					transformCss(scrollBar,'translateY',-dis);
				},
				end:function(){
					scrollBar.style.opacity = 0;
				}								
			};
			
			condrag(wrap,callback);
			
		};
		
		
		
		//tab
		function tab(){
			var tab_wrap = document.querySelectorAll('.tab_wrap');
			var tab_nav = document.querySelectorAll('.tab_nav');
			
			var translateX = tab_nav[0].offsetWidth;
			
			for (var i=0;i<tab_wrap.length;i++) {
				move(tab_wrap[i],tab_nav[i]);
			
			};
			
			function move(tab_wrap,tab_nav){
				
				transformCss(tab_wrap,'translateX',-translateX);
				transformCss(tab_wrap,'translateZ',0.01);
				
				var eleX = 0;
				var startX = 0;
				var startY = 0;
				var isFirst = true;
				var isX = true;
				//load出来还是没有出来
				var isLoad = false;
				
				var loadings = tab_wrap.querySelectorAll('.tab_loading');
				
				//模拟a索引下标
				var now = 0;
				
				//小绿
				var smallG = tab_nav.querySelector('.tab_nav span');
				transformCss(smallG,'translateZ',0.01);
				var aNodes = tab_nav.querySelectorAll('.tab_nav a');
				
			
				
				
				tab_wrap.addEventListener('touchstart',function(event){
					var touch = event.changedTouches[0];
					
					if(isLoad){
						return;
					};
					
					tab_wrap.style.transition = 'none';
					
					eleX = transformCss(this,'translateX');
					startX = touch.clientX;
					startY = touch.clientY;
					
					isFirst = true;
					isX = true;
				});
				tab_wrap.addEventListener('touchmove',function(event){
					
					var touch = event.changedTouches[0];
					
					if(isLoad){
						return;
					};
					
					
					if(!isX){
						return;
					};
										
					var nowX = touch.clientX;
					var disX = nowX - startX;
					var nowY = touch.clientY;
					var disY = nowY - startY;
					if(isFirst){
						isFirst = false;
						if(Math.abs(disY)>Math.abs(disX)){
							isX = false;
						};
					};
					
					transformCss(this,'translateX',eleX+disX);
					
					//手指划过1/2
					if(Math.abs(disX) > translateX/2){
						var target = disX > 0 ? 0 : -2*translateX;

						tab_wrap.style.transition = '1s';
						transformCss(tab_wrap,'translateX',target);
						
						isLoad = true;
						
						if(disX < 0){
							now = now + 1;
						}else{
							now = now - 1;
						};
						
						if(now > aNodes.length -1){
							now = 0;
						}else if(now < 0){
							now = aNodes.length -1;
						};
						
						smallG.style.transition = '0.5s';
						transformCss(smallG,'translateX',aNodes[now].offsetLeft);
						
						
						
						//transitionEnd
						//兼容
						tab_wrap.addEventListener('transitionEnd',transitionEnd);
						tab_wrap.addEventListener('webkitTransitionEnd',transitionEnd);
						
						function transitionEnd(){
							//解绑
							tab_wrap.removeEventListener('transitionEnd',transitionEnd);
							tab_wrap.removeEventListener('webkitTransitionEnd',transitionEnd);
							
							for (var i=0;i<loadings.length;i++) {
								loadings[i].style.opacity = '1';
							};
							
							
							//拿回数据
							setTimeout(function(){
								
								tab_wrap.style.transition = 'none';
								transformCss(tab_wrap,'translateX',-translateX);
								
								isLoad = false;
								for (var i=0;i<loadings.length;i++) {
									loadings[i].style.opacity = 0;
								};
								
							},2000);
							
						};
						
					};
					
					
				});
				tab_wrap.addEventListener('touchend',function(event){
					var touch = event.changedTouches[0];
					
					if(isLoad){
						return;
					};
					
					var nowX = touch.clientX;
					var disX = nowX - startX;
					
					if(Math.abs(disX) < translateX/2){
						tab_wrap.style.transition = '1s';
						transformCss(tab_wrap,'translateX',-translateX);
					};
					
				});
				
			};
			
		};
		
		
		//无缝滑屏
		
		function banner(){
			
			var wrap = document.getElementById('ban_wrap');
			var list = document.getElementById('ban_list');
			transformCss(list,'translateZ',0.01);
			
			list.innerHTML +=  list.innerHTML;
			var liNodes = document.querySelectorAll('#ban_list li');
			var spanNodes = document.querySelectorAll('#ban_navs span');
			
			
			//布局			
			var styleN = document.createElement('style');
			var cssText = '#ban_list{width: '+ liNodes.length +'00%;}';
			cssText += '#ban_list li{width: '+ (1/liNodes.length*100)+'%;}';
			cssText += '#ban_wrap{height: '+ liNodes[0].offsetHeight +'px;}';
			styleN.innerHTML = cssText;
			document.head.appendChild(styleN);
			
			//滑屏
			var elementX = 0;
			var startX = 0;
			//用来保存我自身位置的距离
//			var translateX = 0;
			var timer = 0;
			var now = 0;
			
			//防抖动
			var startY = 0;
			//标记用户手指第一次进入
			var isFirst = true;
			//x上的逻辑是否执行
			var isX = true;
			
			
			wrap.addEventListener('touchstart',function(event){
				var touch = event.changedTouches[0];
				
				clearInterval(timer);
				
				list.style.transition = 'none';
				
				//无缝处理
				var left = transformCss(list,'translateX');
				var now = Math.round(-left/document.documentElement.clientWidth);
				if(now == 0){
					now = spanNodes.length;
				}else if(now == liNodes.length-1){
					now = spanNodes.length - 1;
				};
				transformCss(list,'translateX',-now * document.documentElement.clientWidth);
				
//				elementX = list.offsetLeft;
				startX = touch.clientX;
//				elementX = translateX;
				elementX = transformCss(list,'translateX');
				
				startY = touch.clientY;
				
				isFirst = true;
				isX = true;
				
			});
			wrap.addEventListener('touchmove',function(event){
				var touch = event.changedTouches[0];
				
				//看门狗
				if(!isX){
					return;
				};
				
				
				var nowX = touch.clientX;
				var disX = nowX - startX;
				
				var nowY = touch.clientY;
				var disY = nowY - startY;
				
				if(isFirst){
					if(Math.abs(disY)> Math.abs(disX)){
						isX = false;
						
					};
					isFirst = false;
				};
				
				
				

				transformCss(list,'translateX',elementX + disX);
				
			});
			wrap.addEventListener('touchend',function(event){
				var touch = event.changedTouches[0];
				//图片索引下标
				
//				var left = list.offsetLeft;
//				var left = translateX;
				var left = transformCss(list,'translateX');
				
				now = Math.round(-left/document.documentElement.clientWidth);
				if(now<0){
					now = 0;
				}else if(now > liNodes.length-1){
					now = liNodes.length-1;
				};
				
				//过渡
				list.style.transition = '0.5s';
//				translateX = -now * document.documentElement.clientWidth;
//				list.style.transform = 'translateX('+translateX +'px)';
				transformCss(list,'translateX',-now * document.documentElement.clientWidth);
				
				//同步小圆点
				for(var i=0;i<spanNodes.length;i++){
					spanNodes[i].className = '';
				}
				spanNodes[now%spanNodes.length].className = 'active';
				
				//开启定时器
				auto();
				
			});
			
			
			//自动轮播
//			var now = 0;
			auto();
			function auto(){
				clearInterval(timer);
				timer = setInterval(function(){
					//无缝
					if(now == liNodes.length-1){
						now = spanNodes.length-1;
					};
					list.style.transition = 'none';
					transformCss(list,'translateX',-now*document.documentElement.clientWidth);
					
					//
					setTimeout(function(){
						now++;
						list.style.transition = '0.5s';
						transformCss(list,'translateX',-now*document.documentElement.clientWidth);
						//同步小圆点
						for(var i=0;i<spanNodes.length;i++){
							spanNodes[i].className = '';
						}
						spanNodes[now%spanNodes.length].className = 'active';
					},20);
					
				},2000);
			}
		
			
			
			
		}
		
		
		
		//点击变色
		
		function changeColor(){
			var liNodes = document.querySelectorAll('#navsList li');
			
			//给每个li绑定touchend
			for (var i=0;i<liNodes.length;i++) {
				//误触
				liNodes[i].addEventListener('touchmove',function(){
					if(!this.isMove){
						this.isMove = true;
					};
					
				});
				liNodes[i].addEventListener('touchend',function(){
					if(!this.isMove){
						//给每个li 添加classname
						for (var j=0;j<liNodes.length;j++) {
							liNodes[j].className = '';
						};
						this.className = 'active';
					};
					
					//重置
					this.isMove = false;
					
				});
				
				
			};
			
		};
		
		//导航
		
		function drag(){
			var navs = document.getElementById('navs');
			var navsList = document.getElementById('navsList');
			transformCss(navsList,'translateZ',0.01);
			
			var eleX = 0;
			var startX = 0;
			
			var beginTime = 0;
			var beginValue = 0;
			var endTime = 0;
			var endValue = 0;
//			var disTime = 1;
			var disTime = 0;
			var disValue = 0;
			
			
			navs.addEventListener('touchstart',function(event){
				var touch = event.changedTouches[0];
				
				navsList.style.transition = 'none';
				
				startX = touch.clientX;
				eleX = transformCss(navsList,'translateX');
				
				beginTime = new Date().getTime();
				beginValue = eleX;
				
				disValue = 0;
				
			});
			navs.addEventListener('touchmove',function(event){
				var touch = event.changedTouches[0];
				var nowX = touch.clientX;
				var disX = nowX - startX;
				
				var translateX = eleX+disX;
				var minX = document.documentElement.clientWidth-navsList.offsetWidth;
				//限定范围
				if(translateX > 0){
					//   留白区域/屏幕宽度
					var scale = 1 - translateX/document.documentElement.clientWidth;
					translateX = translateX*scale;
				}else if(translateX < minX){
					var over = minX - translateX;
					var scale = 1 - over/document.documentElement.clientWidth;

					translateX = minX - over*scale;
				};
				
				
				transformCss(navsList,'translateX',translateX);
				
				endTime = new Date().getTime();
				endValue = translateX;
				
//				disTime = endTime - beginTime;
				disValue = endValue - beginValue;
				
			});
			navs.addEventListener('touchend',function(event){
				var touch = event.changedTouches[0];
				var speed = disValue/(endTime - beginTime);
			
				//快速滑屏
				var target = transformCss(navsList,'translateX') + speed*100;
				var minX = document.documentElement.clientWidth-navsList.offsetWidth;
				
				
				//回弹
				//cubic-bezier(.11,1.88,.84,1.63)
				var bezier = '';
				if(target > 0){
					target = 0;
					bezier = 'cubic-bezier(.11,1.88,.84,1.63)';
				}else if(target < minX){
					target = minX;
					bezier = 'cubic-bezier(.11,1.88,.84,1.63)';
				};
				
				navsList.style.transition = '1s '+bezier;
				transformCss(navsList,'translateX',target);
			});
			
		};
		
				
		//菜单切换
	
		function changeMenu(){
			var menuBtn = document.getElementById('menuBtn');
			var mask = document.getElementById('mask');
			
			menuBtn.addEventListener('touchstart',function(event){
				if(menuBtn.className == 'menuBtnClos'){
					menuBtn.className = 'menuBtnOpen';
					mask.style.display = 'block';
				}else if(menuBtn.className == 'menuBtnOpen'){
					menuBtn.className = 'menuBtnClos';
					mask.style.display = 'none';
				};
				//取消冒泡
				event.stopPropagation();
			});
			document.addEventListener('touchstart',function(){
				if(menuBtn.className == 'menuBtnOpen'){
					menuBtn.className = 'menuBtnClos';
					mask.style.display = 'none';
				};
				
			});
			mask.addEventListener('touchstart',function(event){
				//取消冒泡
				event.stopPropagation();
			});
			
		};
		
				
		//失去焦点与获取焦点
		
		function changeFocus(){
			var inputNode = document.querySelector('#search input[type="text"]');
			
			inputNode.addEventListener('touchstart',function(event){	
				//获取焦点
				inputNode.focus();	
				//取消冒泡
				event.stopPropagation();
			});
			document.addEventListener('touchstart',function(){
				//失去焦点
				inputNode.blur();
			});
			
		};
		
	</script>
</html>
